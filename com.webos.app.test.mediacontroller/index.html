<!doctype html>
<html>
<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
th, td {
  padding: 15px;
  text-align: left;
}
table#t01 {
  width: 100%;
  background-color: #f1f1c1;
}
</style>
<head>
<title>Media Controller Test</title>
</head>

<body onload="loadpage()">
<body onreload="loadpage()">
<body style="background-color:white;">
    <h1><p id="id_title">Title : Media Controller Test App<p></h1>
    <p>How to use : This app will load the URL described on target field <br>
       ex)luna-send -n 1 -f luna://com.webos.applicationManager/launch '{"id": "com.webos.app.test.mediacontroller", "params":{"target":"https://googlechrome.github.io/samples/media-session/video.html","displayAffinity": 0}}'</p>
    <p id="id_error" style="color:red;">...<p>
    <table style="width:100%">
        <tr>
            <th>Properties</th>
            <th>Value</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>requiredPermissions</td>
            <td>audio</td>
            <td>operation</td>
            <td></td>
        </tr>
        <tr>
            <td>requiredPermissions</td>
            <td>media</td>
            <td>operation</td>
            <td></td>
        </tr>
        <tr>
            <td>requiredPermissions</td>
            <td>mediapipeline</td>
            <td>operation</td>
            <td></td>
        </tr>
        <tr>
            <td>requiredPermissions</td>
            <td>mediacontroller</td>
            <td>operation</td>
            <td></td>
        </tr>
        <tr>
            <td>requiredPermissions</td>
            <td>mediacontroller</td>
            <td>query</td>
            <td></td>
        </tr>
        <tr>
            <td>requiredPermissions</td>
            <td>mediacontroller</td>
            <td>management</td>
            <td></td>
        </tr>
    </table>
    <br>

    <script type="text/javascript">
        function loadpage() {
            try {
                if(PalmSystem.launchParams) {
                    var launchParams = JSON.parse(PalmSystem.launchParams);
                    if(launchParams.target) {
                        window.location = launchParams.target;
                    }
                    else {
                        document.getElementById("id_error").innerText="PalmSystem.launchParams.target is not defined.";
                    }
                }
                else {
                    document.getElementById("id_error").innerText="PalmSystem.launchParams is not defined.";
                }
            }
            catch (exception) {
                document.getElementById("id_error").innerText="Exception occurred. Please check 'How to use'\n" + exception;
            }
        }
    </script>
</body>
</html>